{
	"info": {
		"_postman_id": "825b4e54-c9f9-4911-85d0-5bf781599773",
		"name": "Team2_API Commandos",
		"schema": "https://schema.getpostman.com/json/collection/v2.0.0/collection.json"
	},
	"item": [
		{
			"name": "Data Driven",
			"item": [
				{
					"name": "UserLogin",
					"item": [
						{
							"name": "Admin Login",
							"event": [
								{
									"listen": "test",
									"script": {
										"id": "ae8d7c71-2e67-4086-a1c3-8d097bb3f7c6",
										"exec": [
											"const commonUtils = pm.require('@postman-hackathon-4703/common-utils');\r",
											"\r",
											"bodyData = pm.response.json();\r",
											"TokenValue = bodyData.token;\r",
											"console.log(\"Token: \" + TokenValue)\r",
											"pm.globals.set(\"TokenValue\", TokenValue);\r",
											"// pm.environment.set(\"TokenValue\", TokenValue);\r",
											";\r",
											"\r",
											"pm.test('Verify user signed in', () => {\r",
											"    const response = pm.response.json();\r",
											"    pm.expect(response.token).to.eql(pm.globals.get('TokenValue'));\r",
											"});\r",
											"\r",
											"pm.test(`Verify userId is a number`, function () {\r",
											"        let bodyData = pm.response.json();\r",
											"        let key = 'userId';\r",
											"        pm.expect(bodyData).to.have.property(key);\r",
											"        pm.expect(bodyData[key]).to.be.a('number');\r",
											"    });\r",
											"\r",
											"pm.test('Verify Role is - ROLE_ADMIN', function () {\r",
											"        pm.expect(pm.response.text()).to.include('ROLE_ADMIN');\r",
											"    });\r",
											"\r",
											"pm.test(`Status code is 200`, function () {\r",
											"        pm.response.to.have.status(200);\r",
											"    });\r",
											"\r",
											"pm.test(\"Response Header Content-Type is application/json\", function () {\r",
											"        pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
											"    });\r",
											"\r",
											"pm.test(\"Verify Response has Body or not\", function(){\r",
											"    pm.response.to.be.withBody;\r",
											"     }); \r",
											"\r",
											"pm.test(\"Verify Response Body as JSON\", function(){\r",
											"    pm.response.to.be.json;\r",
											"    // pm.response.to.have.body({key:value});\r",
											"    });   \r",
											"\r",
											"pm.test(\"Response time is less than 500ms\", function () {\r",
											"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
											"});\r",
											"\r",
											"\r",
											"//Schema Validation\r",
											"const schema={\r",
											"  \"type\": \"object\",\r",
											"  \"properties\": {\r",
											"    \"token\": { \"type\": \"string\" },\r",
											"    \"type\": { \"type\": \"string\" },\r",
											"    \"userId\": { \"type\": \"number\" },\r",
											"    \"loginUserEmail\": { \"type\": \"string\" },\r",
											"    \"roles\": { \"type\": \"array\" }\r",
											"  },\r",
											"  \"required\": [\"token\", \"type\", \"userId\", \"loginUserEmail\", \"roles\"]\r",
											"}\r",
											"\r",
											"pm.test(\"Schema - Validation Response contain valid response data - schema validation\", () => {\r",
											"    pm.response.to.have.jsonSchema(schema);\r",
											"});\r",
											"\r",
											"// // function getAdminToken(){\r",
											"// //     bodyData = pm.response.json();\r",
											"// //     TokenValue = bodyData.token;\r",
											"// //     console.log(\"Token: \" + TokenValue);\r",
											"// //     return TokenValue;\r",
											"// // }\r",
											"// // pm.collectionVariables.set(\"adminToken\", getAdminToken());\r",
											"// //Validation\r",
											"\r",
											"\r",
											"// // PostmanLegacy.setNextRequest('Create New Dietician');\r",
											"// // pm.execution.setNextRequest('Create New Dietician Copy');\r",
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								},
								{
									"listen": "prerequest",
									"script": {
										"id": "e2cc25f0-8b69-4f7b-a56c-0ccb258faf19",
										"exec": [
											""
										],
										"type": "text/javascript",
										"packages": {}
									}
								}
							],
							"id": "c839e77e-b87c-4b6c-ad4c-24b420c2be3e",
							"protocolProfileBehavior": {
								"disableBodyPruning": true
							},
							"request": {
								"auth": {
									"type": "noauth"
								},
								"method": "POST",
								"header": [
									{
										"key": "",
										"value": "",
										"disabled": true
									}
								],
								"body": {
									"mode": "raw",
									"raw": "{ \"userLoginEmailId\" : \"sdet@gmail.com\",\n  \"password\" : \"LmsHackathon@2024\"\n}\n",
									"options": {
										"raw": {
											"language": "json"
										}
									}
								},
								"url": {
									"raw": "https://lms-hackthon-oct24-3efc7e0df381.herokuapp.com/lms/login",
									"protocol": "https",
									"host": [
										"lms-hackthon-oct24-3efc7e0df381",
										"herokuapp",
										"com"
									],
									"path": [
										"lms",
										"login"
									],
									"query": [
										{
											"key": "",
											"value": "",
											"disabled": true
										}
									]
								}
							},
							"response": [
								{
									"id": "5bdff9bc-0fda-439d-8a2c-384b4f4420aa",
									"name": "admin Login",
									"originalRequest": {
										"method": "POST",
										"header": [
											{
												"key": "",
												"value": "",
												"disabled": true
											}
										],
										"body": {
											"mode": "raw",
											"raw": "{\n  \"password\": \"test\",\n  \"userLoginEmail\": \"Team6@gmail.com\"\n}\n\n\n\n\n",
											"options": {
												"raw": {
													"language": "json"
												}
											}
										},
										"url": {
											"raw": "{{BaseUrl}}/login",
											"host": [
												"{{BaseUrl}}"
											],
											"path": [
												"login"
											],
											"query": [
												{
													"key": "",
													"value": "",
													"disabled": true
												}
											]
										}
									},
									"status": "OK",
									"code": 200,
									"_postman_previewlanguage": "json",
									"header": [
										{
											"key": "Server",
											"value": "Cowboy"
										},
										{
											"key": "Report-To",
											"value": "{\"group\":\"heroku-nel\",\"max_age\":3600,\"endpoints\":[{\"url\":\"https://nel.heroku.com/reports?ts=1723106690&sid=c46efe9b-d3d2-4a0c-8c76-bfafa16c5add&s=FCpchhkOvdlJSaQgPHC9O0KzTAvdwpW9fRgna1VvGQg%3D\"}]}"
										},
										{
											"key": "Reporting-Endpoints",
											"value": "heroku-nel=https://nel.heroku.com/reports?ts=1723106690&sid=c46efe9b-d3d2-4a0c-8c76-bfafa16c5add&s=FCpchhkOvdlJSaQgPHC9O0KzTAvdwpW9fRgna1VvGQg%3D"
										},
										{
											"key": "Nel",
											"value": "{\"report_to\":\"heroku-nel\",\"max_age\":3600,\"success_fraction\":0.005,\"failure_fraction\":0.05,\"response_headers\":[\"Via\"]}"
										},
										{
											"key": "Connection",
											"value": "keep-alive"
										},
										{
											"key": "Vary",
											"value": "Origin"
										},
										{
											"key": "Vary",
											"value": "Access-Control-Request-Method"
										},
										{
											"key": "Vary",
											"value": "Access-Control-Request-Headers"
										},
										{
											"key": "X-Content-Type-Options",
											"value": "nosniff"
										},
										{
											"key": "X-Xss-Protection",
											"value": "1; mode=block"
										},
										{
											"key": "Cache-Control",
											"value": "no-cache, no-store, max-age=0, must-revalidate"
										},
										{
											"key": "Pragma",
											"value": "no-cache"
										},
										{
											"key": "Expires",
											"value": "0"
										},
										{
											"key": "Strict-Transport-Security",
											"value": "max-age=31536000 ; includeSubDomains"
										},
										{
											"key": "X-Frame-Options",
											"value": "DENY"
										},
										{
											"key": "Content-Type",
											"value": "application/json"
										},
										{
											"key": "Transfer-Encoding",
											"value": "chunked"
										},
										{
											"key": "Date",
											"value": "Thu, 08 Aug 2024 08:44:50 GMT"
										},
										{
											"key": "Via",
											"value": "1.1 vegur"
										}
									],
									"cookie": [],
									"responseTime": null,
									"body": "{\n    \"token\": \"eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJUZWFtNkBnbWFpbC5jb20iLCJpYXQiOjE3MjMxMDY2OTAsImV4cCI6MTcyMzEzNTQ5MH0.WV-CLS9y0d88RBPwpK4NFIecR9Fckx5gvua3kJFa8baE3D8I4E2dCG6dgGm4Ss0shiPZfPA9sA9r-fvyhYVT2w\",\n    \"type\": \"Bearer \",\n    \"userId\": 7048,\n    \"loginUserEmail\": \"Team6@gmail.com\",\n    \"roles\": [\n        \"ROLE_ADMIN\"\n    ]\n}"
								}
							]
						}
					],
					"id": "858ec22d-6306-475b-ba21-c1255187d17d"
				},
				{
					"name": "Program",
					"item": [],
					"id": "c91c3daf-54f3-43fe-99a2-785aed5ac353"
				},
				{
					"name": "ProgramBatch",
					"item": [],
					"id": "a926468b-7219-406c-b5d7-6110edb3f179"
				},
				{
					"name": "Class",
					"item": [],
					"id": "3f338569-4fe6-494b-8c9d-e0947bf18d1e"
				},
				{
					"name": "ProgramBatchMapController",
					"item": [],
					"id": "f7a74d55-1a52-4d51-9215-5a6afdbc63b7"
				},
				{
					"name": "Delete",
					"item": [],
					"id": "6f3ebadf-9d45-452c-b346-1f83100f6b14"
				}
			],
			"id": "8822e6ff-74cb-4e08-8a61-f8ac5c9bbf24"
		},
		{
			"name": "Negative Scenarios",
			"item": [
				{
					"name": "UserLogin",
					"item": [],
					"id": "cfc1225a-fffe-47e7-a0b4-881b815405a1"
				},
				{
					"name": "Program",
					"item": [],
					"id": "955ef250-b5c6-4baa-b4fa-e66b944cc648"
				},
				{
					"name": "ProgramBatch",
					"item": [],
					"id": "b8af10e9-e83b-4678-83bd-5dc313f7db18"
				},
				{
					"name": "Class",
					"item": [],
					"id": "74b0c171-1c00-4114-ae3e-4a15b76e3f72"
				},
				{
					"name": "ProgramBatchMapController",
					"item": [],
					"id": "27ad7ec0-aa47-438c-852e-c32d655c8c85"
				},
				{
					"name": "Delete",
					"item": [],
					"id": "b95cd8b0-0a12-4748-8b51-0017053959e3"
				}
			],
			"id": "dab93d17-a84e-4f27-a8c7-1aca0ab4cb49"
		},
		{
			"name": "Logout",
			"item": [],
			"id": "3cf19496-c98d-443b-afd0-29c1cd547b3b"
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					""
				],
				"id": "07af7d06-063d-4d5d-b38d-5238f12cb6cb"
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"exec": [
					"// Use module.exports to export the functions that should be\r",
					"// available to use from this package.\r",
					"// module.exports = { <your_function> }\r",
					"\r",
					"// Once exported, use this statement in your scripts to use the package.\r",
					"// const myPackage = pm.require('<package_name>')\r",
					"var commonUtils=()=>{\r",
					"function setTokenFromResponse() {\r",
					"    let bodyData = pm.response.json();\r",
					"\r",
					"    let token = bodyData.token;\r",
					"    if (token) {\r",
					"        console.log(\"Token -\" + token);\r",
					"        pm.globals.set(\"token\", token);\r",
					"    } else {\r",
					"        console.log(\"Token not found in response\");\r",
					"    }\r",
					"}\r",
					"\r",
					"function checkKeyIsNumber(key){debugger;\r",
					"pm.test(`Verify ${key} is a number`, function () {\r",
					"        let bodyData = pm.response.json();\r",
					"        \r",
					"        pm.expect(bodyData).to.have.property(key);\r",
					"        pm.expect(bodyData[key]).to.be.a('number');\r",
					"    });\r",
					"}\r",
					"\r",
					"function getResponseText(responseTxt){\r",
					"    pm.test(responseTxt, function () {\r",
					"        pm.expect(pm.response.text()).to.include(responseTxt);\r",
					"    });\r",
					"}\r",
					"\r",
					"function getStatusCode(statusCode){\r",
					"    pm.test(`Status code is ${statusCode}`, function () {\r",
					"        pm.response.to.have.status(statusCode);\r",
					"    });\r",
					"}\r",
					"\r",
					"var jsonData = pm.response.json();\r",
					"function getErrorMessage(errorCode, errorMessage){\r",
					"   pm.test(`Check error code is: ${jsonData.errorCode} &  error message is: ${jsonData.errorMessage}`, function () {    \r",
					"    // console.log(\"Error Code:\", jsonData.errorCode);\r",
					"    pm.expect(jsonData.errorCode).to.eql(errorCode);\r",
					"    pm.expect(jsonData.errorMessage).to.eql(errorMessage);\r",
					"});\r",
					"}\r",
					"\r",
					"\r",
					"function responseHeaderCheck(){\r",
					"    pm.test(\"Response Header Content-Type is application/json\", function () {\r",
					"        pm.response.to.have.header(\"Content-Type\", \"application/json\");\r",
					"    });\r",
					"}\r",
					"\r",
					"function checkResponseHasBody(){\r",
					"     pm.test(\"Verify Response has Body or not\", function(){\r",
					"    pm.response.to.be.withBody;\r",
					"     });\r",
					"}\r",
					"\r",
					"function checkResponseBodyAsJson(){\r",
					"    pm.test(\"Verify Response Body as JSON\", function(){\r",
					"    pm.response.to.be.json;\r",
					"    // pm.response.to.have.body({key:value});\r",
					"    });\r",
					"}\r",
					"\r",
					"function responseTimeTook(){\r",
					"pm.test(\"Response time is less than 500ms\", function () {\r",
					"    pm.expect(pm.response.responseTime).to.be.below(500);\r",
					"});\r",
					"}\r",
					"\r",
					"function verifyStatusCode(){\r",
					"    let expecStatusCode = pm.iterationData.get(\"statusCode\");\r",
					"let actualStatusCode = pm.response.code;\r",
					"console.log(\"Expected Status Code: \", expecStatusCode); \r",
					"console.log(\"Actual Status Code: \", actualStatusCode);\r",
					"\r",
					"pm.test(\"Status code is as expected\", function () {\r",
					"    pm.expect(actualStatusCode).to.eql(parseInt(expecStatusCode, 10));\r",
					"});\r",
					"}\r",
					"\r",
					"function verifyErrorMessage(){\r",
					"    let expecErrorMessage = pm.iterationData.get(\"ErrorMessage\");\r",
					"let actualErrorMessage = pm.response.text();\r",
					"console.log(\"Expected Error Message: \", expecErrorMessage);\r",
					"console.log(\"Actual Error Code: \", actualErrorMessage);\r",
					"pm.test(\"Check Error Message\", function () {\r",
					"    pm.expect(actualErrorMessage).to.include(expecErrorMessage);\r",
					"});\r",
					"}\r",
					"\r",
					"\r",
					"function createDieticianSchemaValidation(){\r",
					"    //Schema Validation\r",
					"const schema={\r",
					"  \"type\": \"object\",\r",
					"  \"properties\": {\r",
					"    \"id\": { \"type\": \"number\" },\r",
					"    \"loginPassword\": { \"type\": \"string\" },\r",
					"    \"Firstname\": { \"type\": \"string\" },\r",
					"    \"Lastname\": { \"type\": \"string\" },\r",
					"    \"ContactNumber\": {\"type\": \"string\"},\r",
					"    \"DateOfBirth\": { \"type\": \"string\"},\r",
					"    \"Email\": { \"type\": \"string\" },\r",
					"    \"HospitalName\":{\"type\": \"string\"},\r",
					"    \"HospitalStreet\": {\"type\": \"string\"},\r",
					"    \"HospitalCity\": {\"type\": \"string\"},\r",
					"    \"HospitalPincode\":{ \"type\": \"string\"},\r",
					"    \"Education\":{ \"type\": \"string\"}\r",
					"  },\r",
					"  \"required\": [\"id\", \"loginPassword\", \"Firstname\", \"Lastname\", \"ContactNumber\", \"DateOfBirth\", \"Email\",\"HospitalName\", \"HospitalStreet\", \"HospitalCity\", \"HospitalPincode\", \"Education\" ]\r",
					"}\r",
					"\r",
					"pm.test(\"Dietician Schema Validation - Response contain valid response data\", () => {\r",
					"    pm.response.to.have.jsonSchema(schema);\r",
					"});\r",
					"}\r",
					"\r",
					"function userLoginSchemaValidation(){\r",
					"    const schema={\r",
					"  \"type\": \"object\",\r",
					"  \"properties\": {\r",
					"    \"token\": { \"type\": \"string\" },\r",
					"    \"type\": { \"type\": \"string\" },\r",
					"    \"userId\": { \"type\": \"number\" },\r",
					"    \"loginUserEmail\": { \"type\": \"string\" },\r",
					"    \"roles\": { \"type\": \"array\" }\r",
					"  },\r",
					"  \"required\": [\"token\", \"type\", \"userId\", \"loginUserEmail\", \"roles\"]\r",
					"}\r",
					"\r",
					"pm.test(\"Schema - Validation Response contain valid response data - schema validation\", () => {\r",
					"    pm.response.to.have.jsonSchema(schema);\r",
					"});\r",
					"\r",
					"}\r",
					"\r",
					"module.exports = { \r",
					"    \r",
					"    setTokenFromResponse,\r",
					"    checkKeyIsNumber,\r",
					"    getResponseText,\r",
					"    getStatusCode,\r",
					"    responseHeaderCheck,\r",
					"    checkResponseHasBody,\r",
					"    checkResponseBodyAsJson,\r",
					"    responseTimeTook,\r",
					"    getErrorMessage,\r",
					"    verifyStatusCode,\r",
					"    verifyErrorMessage,\r",
					"    userLoginSchemaValidation,\r",
					"    createDieticianSchemaValidation,\r",
					"\r",
					"}\r",
					"}\r",
					"pm.collectionVariables.get(\"variable_key\");"
				],
				"id": "45359c97-3aac-4b01-abf3-1ee4ab1160c7"
			}
		}
	]
}